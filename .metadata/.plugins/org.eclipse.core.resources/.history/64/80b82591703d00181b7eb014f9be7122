package FireEmblemGraphic;

import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;

public class TableroController implements MouseListener {
	private TableroView ventana;
	private TableroModel modelo;
	private DialogoController dialog = new DialogoController(this.ventana.getTablero());
	
	public TableroController() {
		this.modelo = new TableroModel();
		this.ventana = new TableroView(modelo);

		setActions();
	}
	
	private void setActions() {
		for (int i = 0; i < this.ventana.getTablero().length; i++) {
			for (int j = 0; j < this.ventana.getTablero()[i].length; j++) {
				this.ventana.getTablero()[i][j].addMouseListener(this);
			}
		}
		this.ventana.getMover().addMouseListener(this);
		this.ventana.getPersonaje().addMouseListener(this);
		this.ventana.getCasilla().addMouseListener(this);
		
	}

	@Override
	public void mouseClicked(MouseEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mousePressed(MouseEvent e) {
		if(e.getSource() == this.ventana.getMover()) {
			
		} else if(e.getSource() == this.ventana.getPersonaje()) {
			//JDialog cuadroDialogo = new JDialog(this.ventana, true);
			JFrame cuadroDialogo = new JFrame();
			JTable table = new JTable(setContent(), new String[]{"Nombre", "Arma", "HP", "ATK", "DEF"});
			cuadroDialogo.add(new JScrollPane(table));
			table.setDefaultEditor(Object.class, null);
			cuadroDialogo.setSize(400, 195);
			cuadroDialogo.setTitle("VisualizaciÃ³n de Personajes");
			cuadroDialogo.setResizable(false);
			cuadroDialogo.setLocationRelativeTo(null);
			cuadroDialogo.setVisible(true);
		} else if(e.getSource() == this.ventana.getCasilla()) {
			
		}
		
	}

	@Override
	public void mouseReleased(MouseEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mouseEntered(MouseEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mouseExited(MouseEvent e) {
		// TODO Auto-generated method stub
		
	}
	
	public String[][] setContent() {
		String[][] content = new String[9][5];
		int j = 0;
		int k = 0;
		for (int i = 0; i < content.length; i++) {
			if(i < 4) {
				content[i][0] = this.modelo.getJ1().getPersonajes()[j].getNombre();
				content[i][1] = this.modelo.getJ1().getPersonajes()[j].getArma().getNombre();
				content[i][2] = Integer.toString(this.modelo.getJ1().getPersonajes()[j].getHp());
				content[i][3] = Integer.toString(this.modelo.getJ1().getPersonajes()[j].getAtk());
				content[i][4] = Integer.toString(this.modelo.getJ1().getPersonajes()[j].getDef());
				j++;
			} else if(i == 4) {
				content[i][0] = "";
				content[i][1] = "";
				content[i][2] = "";
				content[i][3] = "";
				content[i][4] = "";
			} else {
				content[i][0] = this.modelo.getJ2().getPersonajes()[k].getNombre();
				content[i][1] = this.modelo.getJ2().getPersonajes()[k].getArma().getNombre();
				content[i][2] = Integer.toString(this.modelo.getJ2().getPersonajes()[k].getHp());
				content[i][3] = Integer.toString(this.modelo.getJ2().getPersonajes()[k].getAtk());
				content[i][4] = Integer.toString(this.modelo.getJ2().getPersonajes()[k].getDef());
				k++;
			}
		}
		return content;
	}

	public TableroView getVentana() {
		return ventana;
	}

	public void setVentana(TableroView ventana) {
		this.ventana = ventana;
	}

	public DialogoController getDialog() {
		return dialog;
	}

	public void setDialog(DialogoController dialog) {
		this.dialog = dialog;
	}

}
